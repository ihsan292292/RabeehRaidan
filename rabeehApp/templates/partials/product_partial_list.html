{% include 'include/base.html' %}
{% include 'include/navbar.html' %}
{% load static %}
<section class="section food-menu" id="food-menu">
  <div class="container">
    <p class="section-subtitle">Popular Dishes</p>
    <h2 class="h2 section-title">Our Delicious <span class="span">Foods</span></h2>
    <p class="section-text">Food is any substance consumed to provide nutritional support for an organism.</p>
    <ul class="filter-list">
      <select id="branches" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" style="height: 50px;">
        <option selected value="all">All</option>
        {% for branch in branches %}
        <option value="{{ branch.id }}">{{ branch.location }}</option>
        {% endfor %}
      </select>
    </ul>
    <ul class="food-menu-list" id="food-menu-list">
      {% for prod in product %}
      <li class="food-menu-item" data-branches="{{ prod.branches|join:',' }}">
        <div class="food-menu-card">
          <div class="card-banner" data-aos="zoom-in">
            <img src="{% static '/assets/images/food-menu-1.png' %}" width="300" height="300" loading="lazy" alt="{{ prod.name }}" class="w-100">
            <div class="badge">-15%</div>
            <button class="btn food-menu-btn">Order Now</button>
          </div>
          <div class="wrapper">
            <p class="category">Chicken</p>
            <div class="rating-wrapper">
              <ion-icon name="star"></ion-icon>
              <ion-icon name="star"></ion-icon>
              <ion-icon name="star"></ion-icon>
              <ion-icon name="star"></ion-icon>
              <ion-icon name="star"></ion-icon>
            </div>
          </div>
          <h3 class="h3 card-title">{{ prod.name }}</h3>
          <div class="price-wrapper">
            <p class="price-text">Price:</p>
            <data class="price">{{ prod.price }}</data>
            <del class="del">$69.00</del>
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>
<script>
  $(document).ready(function() {
     $('#branches').change(function() {
         var branchId = $(this).val();
         $.ajax({
             url: '{% url "filter_products" %}',  // Ensure this matches your URL configuration
             type: 'GET',
             data: { 'branch_id': branchId },  // Correct parameter name
             success: function(data) {
                 $('#food-menu-list').html(data);
             },
             error: function(xhr, status, error) {
                 console.error('Error fetching filtered products:', error);
                 // Optionally, you can show an error message to the user
             }
         });
     });
 });
 </script>
{% include 'include/footer.html'%}


 
